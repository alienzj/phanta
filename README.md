# Phage abundance pipeline (TODO: replace with more creative name)
## Kraken2-based pipeline to determine abundance and properties of phages and other kingdoms of life in short read metagenomes

# USAGE

Prior to running the pipeline, clone this repository.

Then create a new environment as follows:

	conda env create -n phage_abund_env --file phage_abund_env.yaml

Activate the environment:

	conda activate phage_abund_env

Then edit the config.yaml file to suit your needs.

If you haven't already, change directory such that you are "in" the cloned repository.

	cd /path/to/cloned/repo

Now you can run the pipeline using Snakemake! I like to do things in the order below. 

-View the directed acylic graph of jobs generated by Snakemake.

	snakemake --dag -s /path/to/Snakefile --configfile /path/to/configfile | dot -Tpdf > /path/to/desired/output/directory

-Do a dry run to verify everything is working as expected.

	snakemake --dryrun -s /path/to/Snakefile --configfile /path/to/configfile --jobs 999 --reason --profile scg

-Run the pipeline! 

	snakemake -s /path/to/Snakefile --configfile /path/to/configfile --jobs 999 --reason --profile scg 

Note: if you are not in the Bhatt Lab, you will need to delete the --profile flag and argument, or edit the argument to the --profile flag. 
